#!/usr/bin/env python3
# A Python script that runs an infinite "7-highlander" process or stops it with a "stop" argument
import signal
import sys
import time
import os

def signal_handler(sig, frame):
    # Handle SIGTERM signal by printing a message and exiting
    print("I am invincible!!!")
    sys.exit(0)

if len(sys.argv) > 1 and sys.argv[1] == "stop":
    # Stop the process
    pid = os.popen("pgrep -f '7-highlander'").read().strip()
    if pid:
        os.kill(int(pid), signal.SIGTERM)
        print(f"Process {pid} stopped")
    else:
        print("Process not found")
else:
    # Run the process
    signal.signal(signal.SIGTERM, signal_handler)
    print("Running 7-highlander...")
    while True:
        print("To infinity and beyond")
        time.sleep(2)
